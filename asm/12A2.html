<!DOCTYPE html>
<html>
<head>
<title>Spectrum ROM: Routine at 12A2</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Spectrum ROM</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="11B7.html">11B7</a></span></td>
<td class="up">Up: <a href="../maps/all.html#12A2">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="1391.html">1391</a></span></td>
</tr>
</table>
<div class="description">12A2: THE 'MAIN EXECUTION' LOOP</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="155D.html">155D</a>.
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="12A2"></span>12A2</td>
<td class="instruction">LD (IY+$31),$02</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12A6"></span>12A6</td>
<td class="instruction">CALL <a href="1795.html">$1795</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="12A9"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="11B7.html">11B7</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="12A9"></span>12A9</td>
<td class="instruction">CALL <a href="16B0.html">$16B0</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="12AC"></span>12AC</td>
<td class="instruction">LD A,$00</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12AE"></span>12AE</td>
<td class="instruction">CALL <a href="1601.html">$1601</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12B1"></span>12B1</td>
<td class="instruction">CALL <a href="0F2C.html">$0F2C</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12B4"></span>12B4</td>
<td class="instruction">CALL <a href="1B17.html">$1B17</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12B7"></span>12B7</td>
<td class="instruction">BIT 7,(IY+$00)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12BB"></span>12BB</td>
<td class="instruction">JR NZ,$12CF</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12BD"></span>12BD</td>
<td class="instruction">BIT 4,(IY+$30)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12C1"></span>12C1</td>
<td class="instruction">JR Z,$1303</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12C3"></span>12C3</td>
<td class="instruction">LD HL,($5C59)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12C6"></span>12C6</td>
<td class="instruction">CALL <a href="11A7.html">$11A7</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12C9"></span>12C9</td>
<td class="instruction">LD (IY+$00),$FF</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12CD"></span>12CD</td>
<td class="instruction">JR $12AC</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="12CF"></span>12CF</td>
<td class="instruction">LD HL,($5C59)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12D2"></span>12D2</td>
<td class="instruction">LD ($5C5D),HL</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12D5"></span>12D5</td>
<td class="instruction">CALL <a href="19FB.html">$19FB</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12D8"></span>12D8</td>
<td class="instruction">LD A,B</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12D9"></span>12D9</td>
<td class="instruction">OR C</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12DA"></span>12DA</td>
<td class="instruction">JP NZ,<a href="155D.html">$155D</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12DD"></span>12DD</td>
<td class="instruction">RST <a href="0018.html">$18</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12DE"></span>12DE</td>
<td class="instruction">CP $0D</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12E0"></span>12E0</td>
<td class="instruction">JR Z,$12A2</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12E2"></span>12E2</td>
<td class="instruction">BIT 0,(IY+$30)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12E6"></span>12E6</td>
<td class="instruction">CALL NZ,<a href="0DAF.html">$0DAF</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12E9"></span>12E9</td>
<td class="instruction">CALL <a href="0D6B.html#0D6E">$0D6E</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12EC"></span>12EC</td>
<td class="instruction">LD A,$19</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12EE"></span>12EE</td>
<td class="instruction">SUB (IY+$4F)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12F1"></span>12F1</td>
<td class="instruction">LD ($5C8C),A</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12F4"></span>12F4</td>
<td class="instruction">SET 7,(IY+$01)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12F8"></span>12F8</td>
<td class="instruction">LD (IY+$00),$FF</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="12FC"></span>12FC</td>
<td class="instruction">LD (IY+$0A),$01</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1300"></span>1300</td>
<td class="instruction">CALL <a href="1B8A.html">$1B8A</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="1303"></span>1303</td>
<td class="instruction">HALT</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1304"></span>1304</td>
<td class="instruction">RES 5,(IY+$01)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1308"></span>1308</td>
<td class="instruction">BIT 1,(IY+$30)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="130C"></span>130C</td>
<td class="instruction">CALL NZ,<a href="0ECD.html">$0ECD</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="130F"></span>130F</td>
<td class="instruction">LD A,($5C3A)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1312"></span>1312</td>
<td class="instruction">INC A</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="1313"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="1555.html">1555</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="1313"></span>1313</td>
<td class="instruction">PUSH AF</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1314"></span>1314</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1317"></span>1317</td>
<td class="instruction">LD (IY+$37),H</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="131A"></span>131A</td>
<td class="instruction">LD (IY+$26),H</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="131D"></span>131D</td>
<td class="instruction">LD ($5C0B),HL</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1320"></span>1320</td>
<td class="instruction">LD HL,$0001</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1323"></span>1323</td>
<td class="instruction">LD ($5C16),HL</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1326"></span>1326</td>
<td class="instruction">CALL <a href="16B0.html">$16B0</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1329"></span>1329</td>
<td class="instruction">RES 5,(IY+$37)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="132D"></span>132D</td>
<td class="instruction">CALL <a href="0D6B.html#0D6E">$0D6E</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1330"></span>1330</td>
<td class="instruction">SET 5,(IY+$02)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1334"></span>1334</td>
<td class="instruction">POP AF</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1335"></span>1335</td>
<td class="instruction">LD B,A</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1336"></span>1336</td>
<td class="instruction">CP $0A</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1338"></span>1338</td>
<td class="instruction">JR C,$133C</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="133A"></span>133A</td>
<td class="instruction">ADD A,$07</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="133C"></span>133C</td>
<td class="instruction">CALL <a href="15EF.html">$15EF</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="133F"></span>133F</td>
<td class="instruction">LD A," "</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1341"></span>1341</td>
<td class="instruction">RST <a href="0010.html">$10</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1342"></span>1342</td>
<td class="instruction">LD A,B</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1343"></span>1343</td>
<td class="instruction">LD DE,$1391</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1346"></span>1346</td>
<td class="instruction">CALL <a href="0C0A.html">$0C0A</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1349"></span>1349</td>
<td class="instruction">XOR A</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="134A"></span>134A</td>
<td class="instruction">LD DE,$1536</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="134D"></span>134D</td>
<td class="instruction">CALL <a href="0C0A.html">$0C0A</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1350"></span>1350</td>
<td class="instruction">LD BC,($5C45)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1354"></span>1354</td>
<td class="instruction">CALL <a href="1A1B.html">$1A1B</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1357"></span>1357</td>
<td class="instruction">LD A,":"</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1359"></span>1359</td>
<td class="instruction">RST <a href="0010.html">$10</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="135A"></span>135A</td>
<td class="instruction">LD C,(IY+$0D)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="135D"></span>135D</td>
<td class="instruction">LD B,$00</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="135F"></span>135F</td>
<td class="instruction">CALL <a href="1A1B.html">$1A1B</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1362"></span>1362</td>
<td class="instruction">CALL <a href="1097.html">$1097</a></td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1365"></span>1365</td>
<td class="instruction">LD A,($5C3A)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1368"></span>1368</td>
<td class="instruction">INC A</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1369"></span>1369</td>
<td class="instruction">JR Z,$1386</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="136B"></span>136B</td>
<td class="instruction">CP $09</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="136D"></span>136D</td>
<td class="instruction">JR Z,$1373</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="136F"></span>136F</td>
<td class="instruction">CP $15</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1371"></span>1371</td>
<td class="instruction">JR NZ,$1376</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="1373"></span>1373</td>
<td class="instruction">INC (IY+$0D)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="1376"></span>1376</td>
<td class="instruction">LD BC,$0003</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1379"></span>1379</td>
<td class="instruction">LD DE,$5C70</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="137C"></span>137C</td>
<td class="instruction">LD HL,$5C44</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="137F"></span>137F</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1381"></span>1381</td>
<td class="instruction">JR Z,$1384</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="1383"></span>1383</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="1384"></span>1384</td>
<td class="instruction">LDDR</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="1386"></span>1386</td>
<td class="instruction">LD (IY+$0A),$FF</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="138A"></span>138A</td>
<td class="instruction">RES 3,(IY+$01)</td>
<td class="comment-10" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="138E"></span>138E</td>
<td class="instruction">JP $12AC</td>
<td class="comment-10" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="11B7.html">11B7</a></span></td>
<td class="up">Up: <a href="../maps/all.html#12A2">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="1391.html">1391</a></span></td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright"></div>
<div class="created">Created using <a href="http://skoolkit.ca/">SkoolKit</a> 5.2.</div>
</footer>
</body>
</html>